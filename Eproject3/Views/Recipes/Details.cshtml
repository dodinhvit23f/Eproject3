@model Eproject3.Models.Recipes
@using Eproject3.Models;
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
    Users u = (Users)Session["User"];
    List<string> ingre = Html.DisplayNameFor(model => model.ingredent).ToString().Split(',').ToList();
    List<string> reci = Html.DisplayNameFor(model => model.Content).ToString().Split('.').ToList();
    bool itEmpty = true;
}

<script>
    function sendFeedback(event, id) {

        if (event.keyCode == 13) {
            sendFeedbackWithClick(id);
        }
    }

    function sendFeedbackWithClick(id) {    

        var itEmpty = document.getElementById("ck_U").value;
       
        if (itEmpty == false || itEmpty == 'False') {

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "FeedBacks/Create", true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(
                JSON.stringify({
                    "Use_id": u.id,
                    "Recipes_id": Model.id,
                    "Content": document.getElementById(id).value
                })
             );

        }

        if (itEmpty === true || itEmpty === 'True') {
            alert("điều hướng trang");
            this.goto('../../Users/LoginView');
        }

    }

z
</script>

<div class="col-sm-12" id="detail-background">
    <div class="col-sm-2"></div>

    <div class="col-sm-8 content-detail">
        <div class="col-sm-12">

            <div class="col-sm-2">
                <div class="user-icon">
                    <img src=".\Image\Logo\logo-white.png" alt="Avatar" />
                </div>

            </div>

            <div class="col-sm-10 title">
                <i>@Html.DisplayFor(model => model.Title)</i>
            </div>

        </div>

        <hr />

        <div class="col-sm-12 blog-content-detail">
            <div class="col-sm-12">
                <h3>Ingredents</h3>
                <div class="col-sm-12">
                    <ul>
                        @foreach (var items in ingre)
                        {
                        <li>@items</li>
                        }
                    </ul>
                </div>
            </div>

        </div>
        <hr>
        <div class="col-sm-12 blog-content-detail">
            <div class="col-sm-12">
                <h3>How to do</h3>
                <div class="col-sm-12">
                    <ul>
                        @foreach (var items in reci)
                        {
                        <li>@items</li>
                        }
                    </ul>
                </div>
            </div>
        </div>

        <hr />

        <div class="blog-img">

            @{
                var Content_step = Model.Content.Split(',').ToList();
                var ImgList = Model.Img.Split(',').ToList();
                int i = 0;
                foreach (var image in ImgList)
                {
                    i++;
            <div class="col-sm-12">
                <p>Step @i: @Content_step.ElementAt(i - 1)</p>
            </div>
            <div class="center-content"> <img src="~/images/@(image)" alt="Food" /> </div>

                }
            }
        </div>


        <div class="col-sm-12 bar">
            <div class="col-sm-12">

                <div class="col-sm-6">
                    Like
                </div>
                <div class="col-sm-6">
                    FeedBack
                </div>
            </div>
        </div>
        <br />
        <div class="col-sm-12 feedback-content">
            <div class="col-sm-2">
                <div class="user-icon-feedback">
                    <img src=".\Image\Logo\logo.png" alt="Avatar" />
                </div>
            </div>
            <div class="col-sm-10 comment">
                <div class="col-sm-8 send-feedback">
                    @if (u != null)
                    {
                        itEmpty = false;
                    }
                    <input id="ck_U" type="hidden" value='@itEmpty.ToString()'/>
                  
                    <input type="text" id="yourFeedback" name="Content" autocomplete="off"  placeholder="Enter feedback" onkeypress="sendFeedback(event, 'yourFeedback')" />
                    <button onclick="sendFeedbackWithClick('yourFeedback')">Send</button>
                </div>
                <div class="col-sm-2">
                    
                </div>
            </div>

            <div class="col-sm-12 feedback-content">
                <div class="col-sm-2">
                    <div class="user-icon-feedback">
                        <img src=".\Image\Logo\logo.png" alt="Avatar" />
                    </div>

                </div>
                <div class="col-sm-9 comment">
                    <strong>Đỗ Đình Tiến</strong><br />
                    <i>Cá Hấp Bia</i>
                </div>
            </div>





        </div>
    </div>
    <div>

       @* @if (u != null)
        {
            using (Html.BeginForm("Create", "FeedBacks", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                <input type="hidden" value="@u.id" name="Use_id" />
                <input type="hidden" value="" name="" />
                <input type="text" name="" autocomplete="off" />
                <input type="submit" value="Comment" />


            }
        }
        else
        {
            <button type="button" onclick=")">Login for comment</button>
        }
           *@
        @foreach (var item in ViewBag.FeedBack)
        {
            <h3>
                @item.Users.Img : @item.Content
            </h3>
        }
    </div>
</div>