@model Eproject3.Models.Recipes
@using Eproject3.Models;
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
    Users u = (Users)Session["User"];
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<h2>Details</h2>

<div>
    <h4>Recipes</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Title)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Title)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Content)
        </dt>

        <dd>
            @{
                var Content_step = Model.Content.Split(',').ToList();
                var ImgList = Model.Img.Split(',').ToList();
                int i = 0;
                foreach (var image in ImgList)
                {
                    i++;
                    <p>Step @i</p>
                    <p>@Content_step.ElementAt(i - 1) <img src="~/images/@(image)" height="200" width="200" /></p>
                }
            }
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.R_Status)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.R_Status)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ingredent)
        </dt>

        <dd>
            @{
                var Igre = Model.ingredent.Split(',').ToList();
                foreach (var ingre in Igre)
                {
                    <p>@ingre</p>
                }

            }
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Categories)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Categories.Cate_Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Levels)
        </dt>

        <dd>
            <span class="fa fa-star " id="rate"></span>
            <span class="fa fa-star "id="rate"></span>
            <span class="fa fa-star "id="rate"></span>
            <span class="fa fa-star "id="rate"></span>
            <span class="fa fa-star "id="rate"></span>
        </dd>

    </dl>
</div>
<div>
    @if (u != null)
    {
        using (Html.BeginForm("Create", "FeedBacks", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            <input type="hidden" value="@u.id" name="Use_id" />
            <input type="hidden" value="@Model.id" name="Recipes_id" />
            <input type="text" name="Content" autocomplete="off" />
            <input type="submit" value="Comment" />


        }
    }
    else
    {
        <button type="button"><a href="~/Users/LoginView">Login for comment</a></button>
    }
    @foreach (var item in ViewBag.FeedBack)
    {
        <h3>
            @item.Users.UPhone : @item.Content
        </h3>
    }
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.id }) |
    @Html.ActionLink("Back to List", "Index")
</p>
<script src="~/Scripts/jquery-1.10.2.js"></script>
<script>
    $(document).ready(function () {
        var Level = @Model.Levels;
        console.log(Level)
        for (var i = 0; i < Level; i++) {
            $("#rate").eq(i).attr("class", "fa fa-star checked");
        }
 
    });
    </script>